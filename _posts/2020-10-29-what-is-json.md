---
layout: post
title: "10. JSON"
tags: [javascript, JSON, AJAX, XML, XHR]
excerpt_separator: <!--more-->
sitemap :
  changefreq : daily
  priority : 1.0

---

## ğŸ“ ì‚¬ì „ê³µë¶€!

HTTPë€ Hypertext Transfer Protocolì˜ ì•½ìë¡œ Clientì™€ Serverê°„ì˜ í†µì‹ ì˜ ì•½ì†ì´ë‹¤. <!--more-->í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­(request)í•˜ê³  ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ê·¸ì— ë§ëŠ” ì‘ë‹µ(response)ì„ ë³´ë‚¸ë‹¤. ì—¬ê¸°ì„œ Hypertextë€ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì‚¬ìš©ë˜ëŠ” í•˜ì´í¼ë§í¬(Hyperlink)ë¿ë§Œ ì•„ë‹ˆë¼ ì „ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ë“¤(ë¬¸ì„œ, ì´ë¯¸ì§€ ë“±)ì„ í¬í•¨í•´ì„œ ë§í•œë‹¤. 



ì´ë ‡ê²Œ HTTPë¥¼ ì´ìš©í•´ì„œ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” AJAXê°€ ìˆë‹¤. Asynchronous JavaAScript and XMLì˜ ì•½ìë¡œ ì›¹í˜ì´ì§€ì—ì„œ ë™ì ìœ¼ë¡œ ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ë°›ì•„ì˜¤ëŠ” ê¸°ìˆ ì´ë‹¤. ëŒ€í‘œì ì¸ ì˜ˆë¡œëŠ” XMLHttpRequestë¼ëŠ” ì˜¤ë¸Œì íŠ¸ê°€ ìˆë‹¤. ì´ ì˜¤ë¸Œì íŠ¸ëŠ” ë¸Œë¼ìš°ì € APIì—ì„œ ì œê³µí•˜ëŠ” ì˜¤ë¸Œì íŠ¸ ì¤‘ì˜ í•˜ë‚˜ë¡œ ì´ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ê°„ë‹¨í•˜ê²Œ ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤. ìµœê·¼ ë¸Œë¼ìš°ì € APIì— ì¶”ê°€ëœ fetch() APIë¥¼ ì‚¬ìš©í•˜ë©´ ì—­ì‹œ ê°„í¸í•˜ê²Œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤.    í•˜ì§€ë§Œ ë¬´ì¡°ê±´ ì‹ ìƒì´ë¼ê³  í•´ì„œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ë‹¤ëŠ” ì‚¬ì‹¤! ì´ APIëŠ” ì¸í„°ë„· ìµìŠ¤í”Œë¡œëŸ¬ì—ì„œ ì§€ì›ì´ ë˜ì§€ ì•Šìœ¼ë‹ˆ ìœ ì˜í•´ì„œ ì‚¬ìš©í•˜ì. 

## XML

XMLì€ HTMLê³¼ ê°™ì€ ë§ˆí¬ì—… ì–¸ì–´ ì¤‘ì˜ í•˜ë‚˜ì´ë‹¤. íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë‚˜íƒ€ë‚´ë©° HTMLê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë°ì´í„°ë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²• ì¤‘ì˜ í•˜ë‚˜ì´ë‹¤. ì„œë²„ì™€ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œì—ëŠ” XMLë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ íŒŒì¼ í¬ë§·ì„ í†µí•´ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆëŠ”ë° ìš”ì¦˜ì€ JSONì„ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì¶”ì„¸ì´ë‹¤.

### XHRì˜ íƒ„ìƒ

AJAXì™€ XHR(XMLHttpRequset)ì´ í™œë°œíˆ ê°œë°œë˜ê³  ìˆì„ ë‹¹ì‹œ ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ì‚¬ì— ìˆëŠ” ì•„ì›ƒë£© ê°œë°œíŒ€ì´ í™œë°œíˆ ì°¸ì—¬í•˜ì˜€ëŠ”ë° ì´ ê°œë°œíŒ€ì€ í†µì‹ ìˆ˜ë‹¨ìœ¼ë¡œ XMLì„ ì‚¬ìš©í•˜ì˜€ê¸° ë•Œë¬¸ì— ì „ì†¡ë°©ë²•(HttpRequest)ì˜ ì•ì— ì•ì— XMLì„ ëœ»í•˜ëŠ” Xë¥¼ ë„£ê²Œ ë˜ì—ˆë‹¤. ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œì—ëŠ” XML ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ íƒ€ì…ì˜ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•ì— XMLì„ ë¶™ì¸ ê²ƒì€ ì˜ëª»ëœ ëª…ëª…ë²•ìœ¼ë¡œ ê°„ì£¼ëœë‹¤. í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ ë“± ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ëŠ” APIë¥¼ ë§Œë“¤ ë•Œì—ëŠ” APIì˜ ì´ë¦„ì„ ëª…ë£Œí•˜ê²Œ ì‘ì„±í•´ì•¼ í•˜ëŠ”ì  ìŠì§€ë§ì!

## JSON

 ë¸Œë¼ìš°ì €ì—ì„œ í†µì‹ ì„ í• ë•ŒëŠ” fetch()ë‚˜ XHRì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ í†µì‹ ì„ í•˜ëŠ”ë° XMLì„ ì‚¬ìš©í•˜ë©´ ë¶ˆí•„ìš”í•œ íƒœê·¸ê°€ ë„ˆë¬´ ë§ì´ ë“¤ì–´ê°€ì„œ ì‚¬ì´ì¦ˆë„ ì»¤ì§€ê³  ì½ê¸° ë¶ˆí¸í•˜ê¸° ë•Œë¬¸ì— ìš”ì¦˜ì€ JSONì„ ë§ì´ ì‚¬ìš©í•œë‹¤. JSONì€ JavaScript Object Notaitonì˜ ì•½ìë¡œ 1999ë…„ ë°œí‘œëœ ECMAScript3ì˜ ì˜¤ë¸Œì íŠ¸ì— ì˜ê°ì„ ë°›ì•„ì„œ ë§Œë“¤ì–´ì§„ ë°ì´í„°í¬ë§·ì´ë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œì˜ ì˜¤ë¸Œì íŠ¸ëŠ” í‚¤(Key)ì™€ ê°’(Value)ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ”ë° ë¸Œë¼ìš°ì € ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë°”ì¼ì—ì„œ ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ë•Œ, ë˜ëŠ” ì„œë²„ì™€ í†µì‹ ì„ í•˜ì§€ ì•Šë”ë¼ë„ ì˜¤ë¸Œì íŠ¸ë¥¼ íŒŒì´ë¦¿ìŠ¤í…œì— ì €ì¥í• ë•Œì—ë„ JSONíƒ€ì…ì„ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆë‹¤. 

í•œë§ˆë””ë¡œJSONì€

* ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ê°€ì¥ ê°„ë‹¨í•œ íŒŒì¼ í¬ë§·
* í…ìŠ¤íŠ¸ ê¸°ë°˜ì˜ ê°€ë²¼ì›€
* ì‚¬ëŒì´ ì½ê¸° í¸í•¨
* í‚¤ì™€ ê°’ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ” íŒŒì¼ í¬ë§·
* ë°ì´í„°ë¥¼ ì„œë²„ì™€ ì£¼ê³  ë°›ì„ ë•Œ ì§ë ¬í™”(serialization)ì„ ìœ„í•´ì„œ ì‚¬ìš©
* í”„ë¡œê·¸ë˜ë°ì–¸ì–´ë‚˜ í”Œë«í¼ì—ìƒê´€ ì—†ì´ ì“°ì¼ ìˆ˜ ìˆë‹¤ `!important`

### JSON ê³µë¶€ í¬ì¸íŠ¸

1. ì˜¤ë¸Œì íŠ¸ë¥¼ ì–´ë–»ê²Œ ì§ë ¬í™”í•˜ì—¬ ì „ì†¡í•˜ëŠ”ê°€?
2. ì§ë ¬í™”ëœ JSONì„ ì–´ë–»ê²Œ deserializeí•˜ì—¬ ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ”ê°€?

JSONì˜¤ë¸Œì íŠ¸ ì•ˆì—ëŠ” ë‘ê°œì˜ APIê°€ ìˆë‹¤. `parse` `stringify` ê°€ ìˆëŠ”ë° ê° APIëŠ” ì˜¤ë²„ë¼ì´ë”© ë˜ì–´ ìˆë‹¤.  

### Object to JSON

```javascript
// JSONì˜¤ë¸Œì íŠ¸ì— ìˆëŠ” stringifyì™€ parseë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì.
let json = JSON.stringify(true)
console.log(json) // true

json = JSON.stringify(['apple', 'banana']);
console.log(json) // ["apple", "banana"] -> ì‹±ê¸€ì—ì„œ ë”ë¸” ì¿¼í…Œì´ì…˜ìœ¼ë¡œ ë°”ë€ ê±°ì— ì£¼ëª©!

const rabbit = {
  name: 'tori',
  color: 'white',
  birthDate: new Date(),
  jump: () => { console.log(`${name} can jump!`) }
}

json = JSON.stringify(rabbit)
console.log(json) 
// {"name":"tori","color":"white","birthDate":"2020-10-30T08:59:05.130Z"}
// jumpë¼ëŠ” í•¨ìˆ˜ëŠ” ë°ì´í„°ì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤!
// JSì—ë§Œ ìˆëŠ” Symbolê³¼ ê°™ì€ ê¸°ëŠ¥ë“¤ë„ JSONì— í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.

// reviverë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜¤ë¸Œì íŠ¸ë¥¼ ì •ì œí•  ìˆ˜ ìˆë‹¤.
json = JSON.stringify(rabbit, ['name']) // {"name":"tori"}
json = JSON.stringify(rabbit, ['name', 'color']) // {"name":"tori", "color":"white"}
json = JSON.stringify(rabbit, (key, value) => {
  console.log(`key: ${key}, value: ${value}`)
}) // ì œì¼ ì²˜ìŒ ì „ë‹¬ë˜ëŠ”ê±´ ì˜¤ë¸Œì íŠ¸ ê·¸ ìì²´! ê·¸ í›„ ì˜¤ë¸Œì íŠ¸ì˜ ê°’ë“¤ì„ í•˜ë‚˜ì”© ì½ëŠ”ë‹¤.

```



### JSON to Object

```javascript
json = JSON.stringify(rabbit);
const obj = JSON.parse(json);
console.log(obj) // {"name":"tori","color":"white","birthDate":"2020-10-30T08:59:05.130Z"}

// í•¨ìˆ˜ëŠ” serializeë  ë•Œ JSONìœ¼ë¡œ ë³€í™˜ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ objì—ëŠ” ì›ë˜ rabbitì— ìˆë˜ jump()ê°€ ì—†ë‹¤.
rabbit.jump() // can jump!
obj.jump() // Uncaught TypeError

// ì›ë˜ rabbitì— ìˆëŠ” birthDateëŠ” ì˜¤ë¸Œì íŠ¸ì´ë‚˜ JSONìœ¼ë¡œ ë“¤ì–´ê°„ ê°’ì€ ìŠ¤íŠ¸ë§ì´ë¯€ë¡œ 
// Dateì— ê´€ë ¨ëœ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ë‹¤.
console.log(rabbit.birthDate.getDate()) // 2020-10-30T08:59:05.130Z
console.log(obj.birthDate.getDate()) // Error!

// ì´ëŠ” reviverì— ì½œë°±í•¨ìˆ˜ë¥¼ ë„£ì–´ì„œ objì•ˆì— Date ì˜¤ë¸Œì íŠ¸ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤
const obj = JSON.parse(json, key, value) => {
  return key === 'bitrhDate'? new Date(value): value;
})

```



## í•™ìŠµì— ìœ ìš©í•œ ì‚¬ì´íŠ¸

[JSON DIFF](http://www.jsondiff.com) : ë‘ê°œì˜ JSONì„ ë¹„êµí•˜ì—¬ ë‹¤ë¥¸ì ì„ ì°¾ì•„ì£¼ëŠ” ì‚¬ì´íŠ¸. ë””ë²„ê¹…í• ë•Œ ìœ ìš©í•˜ë‹¤.

[JSON Beautifier](https://jsonbeautifier.org) : JSON í¬ë§·ì„ ë³µì‚¬í•˜ë©´ì„œ í¬ë§·ì´ ë§ê°€ì§€ëŠ” ê²½ìš° ê³ ì³ì¤€ë‹¤.

[JSON Parser](https://jsonparser.org) : JSON íŒŒì¼ì˜ ì˜¤ë¸Œì íŠ¸ íƒ€ì…ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ì„œ ë³´ì—¬ì¤€ë‹¤.

[JSON Validator](https://tools.learningcontainer.com) : í•´ë‹¹ JSON ì´ ìœ íš¨í•œì§€ ê²€ì‚¬ë¥¼ í•´ì¤€ë‹¤!

